{"version":3,"sources":["ChatterLikedBy.min__45edc409d97327d59af1.js","./src/utils/ChatterUtils.ts","./src/ui/ChatterLikedBy/ChatterLikedBy.ts"],"names":["webpackJsonpCoveo__temporary","224","module","exports","__webpack_require__","Object","defineProperty","value","buildURI","objectURI","objectId","newObjectId","replace","bindClickEventToElement","element","openInPrimaryTab","openInSubTab","ChatterUtils","242","__extends","this","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","options","bindings","result","ChatterLikedBy","ID","ComponentOptions","initComponentOptions","Utils","isNullOrUndefined","getFieldValue","likeNames","split","likeIds","rootElement","$$","className","append","el","thumbIcon","fullListElement","renderLikesList","nbLikesToRender","_this","tempElement","i","length","renderLikeLink","l","toLowerCase","othersCount","clickableLink","text","toString","on","e","preventDefault","empty","innerHTML","likeName","likeId","link","href","clickUri","doExport","exportGlobally","buildNumberOption","defaultValue","min","buildBooleanOption","Component","Initialization","registerAutoCreateComponent"],"mappings":"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","file":"ChatterLikedBy.min__45edc409d97327d59af1.js","sourcesContent":["webpackJsonpCoveo__temporary([50],{\n\n/***/ 224:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ChatterUtils = /** @class */ (function () {\n    function ChatterUtils() {\n    }\n    ChatterUtils.buildURI = function (objectURI, objectId, newObjectId) {\n        return objectURI.replace(objectId, newObjectId);\n    };\n    ChatterUtils.bindClickEventToElement = function (element, openInPrimaryTab, openInSubTab) {\n        return element;\n    };\n    return ChatterUtils;\n}());\nexports.ChatterUtils = ChatterUtils;\n\n\n/***/ }),\n\n/***/ 242:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Initialization_1 = __webpack_require__(2);\nvar ComponentOptions_1 = __webpack_require__(8);\nvar Component_1 = __webpack_require__(7);\nvar Utils_1 = __webpack_require__(4);\nvar Dom_1 = __webpack_require__(1);\nvar Strings_1 = __webpack_require__(6);\nvar ChatterUtils_1 = __webpack_require__(224);\nvar GlobalExports_1 = __webpack_require__(3);\nvar ChatterLikedBy = /** @class */ (function (_super) {\n    __extends(ChatterLikedBy, _super);\n    function ChatterLikedBy(element, options, bindings, result) {\n        var _this = _super.call(this, element, ChatterLikedBy.ID, bindings) || this;\n        _this.element = element;\n        _this.options = options;\n        _this.bindings = bindings;\n        _this.result = result;\n        _this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, ChatterLikedBy, options);\n        if (!Utils_1.Utils.isNullOrUndefined(Utils_1.Utils.getFieldValue(result, 'sflikedby')) &&\n            !Utils_1.Utils.isNullOrUndefined(Utils_1.Utils.getFieldValue(result, 'sflikedbyid'))) {\n            var likeNames = Utils_1.Utils.getFieldValue(result, 'sflikedby').split(';');\n            var likeIds = Utils_1.Utils.getFieldValue(result, 'sflikedbyid').split(';');\n            var rootElement = Dom_1.$$('div', {\n                className: 'coveo-chatter-result-box-row'\n            });\n            Dom_1.$$(element).append(rootElement.el);\n            var thumbIcon = Dom_1.$$('div', {\n                className: 'coveo-sprites-common-thumbup_inactive coveo-chatter-result-box-icon'\n            });\n            rootElement.append(thumbIcon.el);\n            var fullListElement = Dom_1.$$('div', {\n                className: 'coveo-chatter-result-likes'\n            });\n            rootElement.append(fullListElement.el);\n            _this.renderLikesList(fullListElement.el, result, likeNames, likeIds, _this.options.nbLikesToRender);\n        }\n        return _this;\n    }\n    ChatterLikedBy.prototype.renderLikesList = function (element, result, likeNames, likeIds, nbLikesToRender) {\n        var _this = this;\n        var tempElement = Dom_1.$$('div');\n        for (var i = 0; i < likeIds.length - 1 && (nbLikesToRender == 0 || i < nbLikesToRender); i++) {\n            tempElement.append(this.renderLikeLink(result, likeNames[i], likeIds[i]));\n            if ((nbLikesToRender == 0 || i < nbLikesToRender - 1) && i < likeIds.length - 2) {\n                tempElement.append(Dom_1.$$('span', {}, ', ').el);\n            }\n            else if (i < likeIds.length - 1) {\n                tempElement.append(Dom_1.$$('span', {}, \" \" + Strings_1.l('And').toLowerCase() + \" \").el);\n            }\n        }\n        if (nbLikesToRender == 0 || likeIds.length <= nbLikesToRender) {\n            tempElement.append(this.renderLikeLink(result, likeNames[likeIds.length - 1], likeIds[likeIds.length - 1]));\n        }\n        else {\n            var othersCount = likeIds.length - nbLikesToRender;\n            var clickableLink = Dom_1.$$('a');\n            clickableLink.text(\" \" + Strings_1.l('Others', othersCount.toString(), othersCount));\n            clickableLink.on('click', function (e) {\n                e.preventDefault();\n                Dom_1.$$(element).empty();\n                _this.renderLikesList(element, result, likeNames, likeIds, 0);\n            });\n            tempElement.append(clickableLink.el);\n        }\n        if (likeIds.length > 0) {\n            var name_1 = Dom_1.$$('span');\n            name_1.el.innerHTML = Strings_1.l('LikesThis', tempElement.el.innerHTML, likeIds.length);\n            Dom_1.$$(element).append(name_1.el);\n        }\n    };\n    ChatterLikedBy.prototype.renderLikeLink = function (result, likeName, likeId) {\n        var link = Dom_1.$$('a', {\n            href: ChatterUtils_1.ChatterUtils.buildURI(result.clickUri, Utils_1.Utils.getFieldValue(result, 'sffeeditemid'), likeId)\n        });\n        link.text(likeName);\n        return link.el;\n    };\n    ChatterLikedBy.ID = 'ChatterLikedBy';\n    ChatterLikedBy.doExport = function () {\n        GlobalExports_1.exportGlobally({\n            ChatterLikedBy: ChatterLikedBy\n        });\n    };\n    ChatterLikedBy.options = {\n        nbLikesToRender: ComponentOptions_1.ComponentOptions.buildNumberOption({ defaultValue: 2, min: 0 }),\n        openInPrimaryTab: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: false }),\n        openInSubTab: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true })\n    };\n    return ChatterLikedBy;\n}(Component_1.Component));\nexports.ChatterLikedBy = ChatterLikedBy;\nInitialization_1.Initialization.registerAutoCreateComponent(ChatterLikedBy);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// ChatterLikedBy.min__45edc409d97327d59af1.js","export class ChatterUtils {\n  static buildURI(objectURI: string, objectId: string, newObjectId: string) {\n    return objectURI.replace(objectId, newObjectId);\n  }\n\n  static bindClickEventToElement(element: HTMLElement, openInPrimaryTab: boolean, openInSubTab: boolean) {\n    return element;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/ChatterUtils.ts","import { Initialization } from '../Base/Initialization';\nimport { ComponentOptions } from '../Base/ComponentOptions';\nimport { Component } from '../Base/Component';\nimport { IComponentBindings } from '../Base/ComponentBindings';\nimport { IQueryResult } from '../../rest/QueryResult';\nimport { Utils } from '../../utils/Utils';\nimport { $$ } from '../../utils/Dom';\nimport { l } from '../../strings/Strings';\nimport { ChatterUtils } from '../../utils/ChatterUtils';\nimport { exportGlobally } from '../../GlobalExports';\n\nexport interface IChatterLikedByOptions {\n  nbLikesToRender: number;\n  openInPrimaryTab: boolean;\n  openInSubTab: boolean;\n}\n\nexport class ChatterLikedBy extends Component {\n  static ID = 'ChatterLikedBy';\n\n  static doExport = () => {\n    exportGlobally({\n      ChatterLikedBy: ChatterLikedBy\n    });\n  };\n\n  static options: IChatterLikedByOptions = {\n    nbLikesToRender: ComponentOptions.buildNumberOption({ defaultValue: 2, min: 0 }),\n    openInPrimaryTab: ComponentOptions.buildBooleanOption({ defaultValue: false }),\n    openInSubTab: ComponentOptions.buildBooleanOption({ defaultValue: true })\n  };\n\n  constructor(\n    public element: HTMLElement,\n    public options?: IChatterLikedByOptions,\n    public bindings?: IComponentBindings,\n    public result?: IQueryResult\n  ) {\n    super(element, ChatterLikedBy.ID, bindings);\n    this.options = ComponentOptions.initComponentOptions(element, ChatterLikedBy, options);\n\n    if (\n      !Utils.isNullOrUndefined(Utils.getFieldValue(result, 'sflikedby')) &&\n      !Utils.isNullOrUndefined(Utils.getFieldValue(result, 'sflikedbyid'))\n    ) {\n      let likeNames = Utils.getFieldValue(result, 'sflikedby').split(';');\n      let likeIds = Utils.getFieldValue(result, 'sflikedbyid').split(';');\n\n      let rootElement = $$('div', {\n        className: 'coveo-chatter-result-box-row'\n      });\n      $$(element).append(rootElement.el);\n\n      let thumbIcon = $$('div', {\n        className: 'coveo-sprites-common-thumbup_inactive coveo-chatter-result-box-icon'\n      });\n      rootElement.append(thumbIcon.el);\n\n      let fullListElement = $$('div', {\n        className: 'coveo-chatter-result-likes'\n      });\n      rootElement.append(fullListElement.el);\n\n      this.renderLikesList(fullListElement.el, result, likeNames, likeIds, this.options.nbLikesToRender);\n    }\n  }\n\n  private renderLikesList(element: HTMLElement, result: IQueryResult, likeNames: string[], likeIds: string[], nbLikesToRender: number) {\n    let tempElement = $$('div');\n\n    for (let i = 0; i < likeIds.length - 1 && (nbLikesToRender == 0 || i < nbLikesToRender); i++) {\n      tempElement.append(this.renderLikeLink(result, likeNames[i], likeIds[i]));\n\n      if ((nbLikesToRender == 0 || i < nbLikesToRender - 1) && i < likeIds.length - 2) {\n        tempElement.append($$('span', {}, ', ').el);\n      } else if (i < likeIds.length - 1) {\n        tempElement.append($$('span', {}, ` ${l('And').toLowerCase()} `).el);\n      }\n    }\n\n    if (nbLikesToRender == 0 || likeIds.length <= nbLikesToRender) {\n      tempElement.append(this.renderLikeLink(result, likeNames[likeIds.length - 1], likeIds[likeIds.length - 1]));\n    } else {\n      let othersCount = likeIds.length - nbLikesToRender;\n      let clickableLink = $$('a');\n      clickableLink.text(` ${l('Others', othersCount.toString(), othersCount)}`);\n      clickableLink.on('click', (e: Event) => {\n        e.preventDefault();\n        $$(element).empty();\n        this.renderLikesList(element, result, likeNames, likeIds, 0);\n      });\n      tempElement.append(clickableLink.el);\n    }\n\n    if (likeIds.length > 0) {\n      let name = $$('span');\n      name.el.innerHTML = l('LikesThis', tempElement.el.innerHTML, likeIds.length);\n      $$(element).append(name.el);\n    }\n  }\n\n  private renderLikeLink(result: IQueryResult, likeName: string, likeId: string): HTMLElement {\n    let link = $$('a', {\n      href: ChatterUtils.buildURI(result.clickUri, Utils.getFieldValue(result, 'sffeeditemid'), likeId)\n    });\n    link.text(likeName);\n    return link.el;\n  }\n}\n\nInitialization.registerAutoCreateComponent(ChatterLikedBy);\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ChatterLikedBy/ChatterLikedBy.ts"],"sourceRoot":""}