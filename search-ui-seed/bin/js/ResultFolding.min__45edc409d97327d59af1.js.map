{"version":3,"sources":["ResultFolding.min__45edc409d97327d59af1.js","./src/ui/ResultFolding/ResultFolding.ts","./src/ui/ResultFolding/DefaultFoldingTemplate.ts"],"names":["webpackJsonpCoveo__temporary","269","module","exports","__webpack_require__","__extends","this","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","verb","n","v","op","f","TypeError","_","y","t","call","label","ops","pop","trys","length","push","g","sent","throw","return","Symbol","iterator","defineProperty","element","options","bindings","ResultFolding","ID","showingMoreResults","ComponentOptions","initComponentOptions","Assert","exists","buildElements","renderElements","_this","showMoreResults","results","e_1","logger","_a","moreResults","cancelAnyPendingShowMore","moreResultsPromise","waitAnimation","$$","className","el","appendChild","updateElementVisibility","childResults","usageAnalytics","logClickEvent","analyticsActionCauseList","foldingShowMore","getAnalyticsMetadata","displayThoseResults","Logger","warn","undefined","detach","showLessResults","logCustomEvent","foldingShowLess","scrollToResultElement","buildHeader","buildResults","buildFooter","parentElement","hasClass","bindOverlayEvents","hide","header","normalCaption","expandedCaption","oneResultCaption","footer","showMore","showLess","footerIconShowMore","SVGIcons","icons","arrowDown","SVGDom","addClassToSVGInContainer","footerIconShowLess","arrowUp","showMoreLink","moreCaption","showLessLink","lessCaption","AccessibleButton","withElement","withLabel","withSelectAction","build","subResultsLength","toggle","toggleClass","Utils","showIfNormal","find","showIfExpanded","resultElem","closest","window","scrollTo","Win","scrollY","getBoundingClientRect","top","childResultsPromises","childsToAppend","map","renderChildResult","all","empty","each","oneChild","childResult","QueryUtils","setStateObjectOnQueryResult","queryStateModel","get","setSearchInterfaceObjectOnQueryResult","searchInterface","resultTemplate","instantiateToElement","wrapInDiv","checkCondition","responsiveComponents","addClass","Initialization","automaticallyCreateComponentsInsideResult","initResult","doesNotExists","bind","one","documentURL","clickUri","documentTitle","title","author","getFieldValue","doExport","exportGlobally","DefaultFoldingTemplate","TemplateComponentOptions","buildTemplateOption","defaultFunction","buildLocalizedStringOption","postProcessing","l","Component","registerAutoCreateComponent","653","instantiateToString","queryResult","getType","Template","654"],"mappings":"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","file":"ResultFolding.min__45edc409d97327d59af1.js","sourcesContent":["webpackJsonpCoveo__temporary([41],{\n\n/***/ 269:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Component_1 = __webpack_require__(7);\nvar ComponentOptions_1 = __webpack_require__(8);\nvar DefaultFoldingTemplate_1 = __webpack_require__(653);\nvar Utils_1 = __webpack_require__(4);\nvar QueryUtils_1 = __webpack_require__(21);\nvar Initialization_1 = __webpack_require__(2);\nvar Assert_1 = __webpack_require__(5);\nvar Dom_1 = __webpack_require__(1);\nvar Strings_1 = __webpack_require__(6);\nvar underscore_1 = __webpack_require__(0);\nvar GlobalExports_1 = __webpack_require__(3);\nvar AnalyticsActionListMeta_1 = __webpack_require__(10);\nvar Logger_1 = __webpack_require__(9);\n__webpack_require__(654);\nvar SVGIcons_1 = __webpack_require__(12);\nvar SVGDom_1 = __webpack_require__(16);\nvar TemplateComponentOptions_1 = __webpack_require__(61);\nvar AccessibleButton_1 = __webpack_require__(15);\n/**\n * The `ResultFolding` component renders folded result sets. It is usable inside a result template when there is an\n * active [`Folding`]{@link Folding} component in the page. This component takes care of rendering the parent result and\n * its child results in a coherent manner.\n *\n * This component is a result template component (see [Result Templates](https://docs.coveo.com/en/413/)).\n *\n * See [Folding Results](https://docs.coveo.com/en/428/).\n */\nvar ResultFolding = /** @class */ (function (_super) {\n    __extends(ResultFolding, _super);\n    /**\n     * Creates a new ResultFolding component.\n     * @param options The options for the ResultFolding component.\n     * @param bindings The bindings that the component requires to function normally. If not set, these will be\n     * automatically resolved (with a slower execution time).\n     * @param result The result to associate the component with.\n     */\n    function ResultFolding(element, options, bindings, result) {\n        var _this = _super.call(this, element, ResultFolding.ID, bindings) || this;\n        _this.element = element;\n        _this.options = options;\n        _this.result = result;\n        _this.showingMoreResults = false;\n        _this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(_this.element, ResultFolding, options);\n        Assert_1.Assert.exists(result);\n        _this.buildElements();\n        _this.renderElements();\n        return _this;\n    }\n    /**\n     * Show more results by fetching additional results from the index, which match the current folded conversation.\n     * This is the equivalent of clicking \"Show all conversation\".\n     * @returns {Promise<IQueryResult[]>}\n     */\n    ResultFolding.prototype.showMoreResults = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var results, e_1, logger;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        Assert_1.Assert.exists(this.result.moreResults);\n                        this.cancelAnyPendingShowMore();\n                        this.moreResultsPromise = this.result.moreResults();\n                        this.waitAnimation = Dom_1.$$('div', { className: 'coveo-loading-spinner' }).el;\n                        this.results.appendChild(this.waitAnimation);\n                        this.updateElementVisibility();\n                        return [4 /*yield*/, this.moreResultsPromise];\n                    case 1:\n                        results = _a.sent();\n                        this.childResults = results;\n                        this.showingMoreResults = true;\n                        this.usageAnalytics.logClickEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.foldingShowMore, this.getAnalyticsMetadata(), this.result, this.element);\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        return [4 /*yield*/, this.displayThoseResults(results)];\n                    case 3:\n                        _a.sent();\n                        this.updateElementVisibility(results.length);\n                        return [3 /*break*/, 5];\n                    case 4:\n                        e_1 = _a.sent();\n                        logger = new Logger_1.Logger(this);\n                        logger.warn('An error occured when trying to display more results');\n                        return [3 /*break*/, 5];\n                    case 5:\n                        this.moreResultsPromise = undefined;\n                        Dom_1.$$(this.waitAnimation).detach();\n                        this.waitAnimation = undefined;\n                        return [2 /*return*/, results];\n                }\n            });\n        });\n    };\n    /**\n     * Show less results for a given conversation. This is the equivalent of clicking \"Show less\"\n     */\n    ResultFolding.prototype.showLessResults = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.cancelAnyPendingShowMore();\n                        this.showingMoreResults = false;\n                        this.usageAnalytics.logCustomEvent(AnalyticsActionListMeta_1.analyticsActionCauseList.foldingShowLess, this.getAnalyticsMetadata(), this.element);\n                        return [4 /*yield*/, this.displayThoseResults(this.result.childResults)];\n                    case 1:\n                        _a.sent();\n                        this.updateElementVisibility();\n                        this.scrollToResultElement();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ResultFolding.prototype.buildElements = function () {\n        this.buildHeader();\n        this.buildResults();\n        this.buildFooter();\n    };\n    ResultFolding.prototype.renderElements = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.displayThoseResults(this.result.childResults)];\n                    case 1:\n                        _a.sent();\n                        this.updateElementVisibility();\n                        if (Dom_1.$$(this.element.parentElement).hasClass('CoveoCardOverlay')) {\n                            this.bindOverlayEvents();\n                        }\n                        if (this.result.childResults.length == 0 && !this.result.moreResults) {\n                            Dom_1.$$(this.element).hide();\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ResultFolding.prototype.buildHeader = function () {\n        var header = Dom_1.$$('div', { className: 'coveo-folding-header' }).el;\n        this.element.appendChild(header);\n        if (this.options.normalCaption != undefined && this.options.expandedCaption != undefined) {\n            this.normalCaption = Dom_1.$$('div', { className: 'coveo-folding-normal-caption' }, this.options.normalCaption).el;\n            header.appendChild(this.normalCaption);\n            this.expandedCaption = Dom_1.$$('div', { className: 'coveo-folding-expanded-caption' }, this.options.expandedCaption).el;\n            header.appendChild(this.expandedCaption);\n        }\n        this.oneResultCaption = Dom_1.$$('div', { className: 'coveo-folding-oneresult-caption' }, this.options.oneResultCaption).el;\n        header.appendChild(this.oneResultCaption);\n    };\n    ResultFolding.prototype.buildResults = function () {\n        this.results = Dom_1.$$('div', { className: 'coveo-folding-results' }).el;\n        this.element.appendChild(this.results);\n    };\n    ResultFolding.prototype.buildFooter = function () {\n        var _this = this;\n        var footer = Dom_1.$$('div', { className: 'coveo-folding-footer' }).el;\n        this.element.parentElement.appendChild(footer);\n        if (this.result.moreResults) {\n            this.showMore = Dom_1.$$('div', { className: 'coveo-folding-footer-section-for-less' }).el;\n            footer.appendChild(this.showMore);\n            this.showLess = Dom_1.$$('div', { className: 'coveo-folding-footer-section-for-more' }).el;\n            footer.appendChild(this.showLess);\n            var footerIconShowMore = Dom_1.$$('div', { className: 'coveo-folding-more' }, Dom_1.$$('span', { className: 'coveo-folding-footer-icon' }, SVGIcons_1.SVGIcons.icons.arrowDown).el).el;\n            SVGDom_1.SVGDom.addClassToSVGInContainer(footerIconShowMore, 'coveo-folding-more-svg');\n            var footerIconShowLess = Dom_1.$$('div', { className: 'coveo-folding-less' }, Dom_1.$$('span', { className: 'coveo-folding-footer-icon' }, SVGIcons_1.SVGIcons.icons.arrowUp).el).el;\n            SVGDom_1.SVGDom.addClassToSVGInContainer(footerIconShowLess, 'coveo-folding-less-svg');\n            var showMoreLink = Dom_1.$$('a', { className: 'coveo-folding-show-more' }, this.options.moreCaption).el;\n            var showLessLink = Dom_1.$$('a', { className: 'coveo-folding-show-less' }, this.options.lessCaption).el;\n            new AccessibleButton_1.AccessibleButton()\n                .withElement(this.showMore)\n                .withLabel(this.options.moreCaption)\n                .withSelectAction(function () { return _this.showMoreResults(); })\n                .build();\n            new AccessibleButton_1.AccessibleButton()\n                .withElement(this.showLess)\n                .withLabel(this.options.lessCaption)\n                .withSelectAction(function () { return _this.showLessResults(); })\n                .build();\n            this.showMore.appendChild(showMoreLink);\n            this.showLess.appendChild(showLessLink);\n            this.showMore.appendChild(footerIconShowMore);\n            this.showLess.appendChild(footerIconShowLess);\n        }\n    };\n    ResultFolding.prototype.updateElementVisibility = function (subResultsLength) {\n        if (this.normalCaption) {\n            Dom_1.$$(this.normalCaption).toggle(!this.showingMoreResults && this.result.childResults.length > 0);\n        }\n        if (this.expandedCaption) {\n            Dom_1.$$(this.expandedCaption).toggle(this.showingMoreResults);\n        }\n        Dom_1.$$(this.oneResultCaption).toggleClass('coveo-hidden', !(subResultsLength && subResultsLength == 1));\n        if (this.showMore) {\n            Dom_1.$$(this.showMore).toggleClass('coveo-visible', !this.showingMoreResults && !Utils_1.Utils.exists(this.moreResultsPromise));\n            Dom_1.$$(this.showLess).toggleClass('coveo-visible', this.showingMoreResults);\n        }\n        var showIfNormal = Dom_1.$$(this.element).find('.coveo-show-if-normal');\n        if (showIfNormal) {\n            Dom_1.$$(showIfNormal).toggle(!this.showingMoreResults);\n        }\n        var showIfExpanded = Dom_1.$$(this.element).find('.coveo-show-if-expanded');\n        if (showIfExpanded) {\n            Dom_1.$$(showIfExpanded).toggle(this.showingMoreResults);\n        }\n    };\n    ResultFolding.prototype.scrollToResultElement = function () {\n        var resultElem = Dom_1.$$(this.element).closest('CoveoResult');\n        window.scrollTo(0, new Dom_1.Win(window).scrollY() + resultElem.getBoundingClientRect().top);\n    };\n    ResultFolding.prototype.displayThoseResults = function (results) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            var childResultsPromises, childsToAppend;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        childResultsPromises = underscore_1.map(results, function (result) {\n                            return _this.renderChildResult(result);\n                        });\n                        return [4 /*yield*/, Promise.all(childResultsPromises)];\n                    case 1:\n                        childsToAppend = _a.sent();\n                        Dom_1.$$(this.results).empty();\n                        underscore_1.each(childsToAppend, function (oneChild) {\n                            _this.results.appendChild(oneChild);\n                        });\n                        return [2 /*return*/, true];\n                }\n            });\n        });\n    };\n    ResultFolding.prototype.renderChildResult = function (childResult) {\n        return __awaiter(this, void 0, void 0, function () {\n            var oneChild;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        QueryUtils_1.QueryUtils.setStateObjectOnQueryResult(this.queryStateModel.get(), childResult);\n                        QueryUtils_1.QueryUtils.setSearchInterfaceObjectOnQueryResult(this.searchInterface, childResult);\n                        return [4 /*yield*/, this.options.resultTemplate.instantiateToElement(childResult, {\n                                wrapInDiv: false,\n                                checkCondition: false,\n                                responsiveComponents: this.searchInterface.responsiveComponents\n                            })];\n                    case 1:\n                        oneChild = _a.sent();\n                        Dom_1.$$(oneChild).addClass('coveo-result-folding-child-result');\n                        Dom_1.$$(oneChild).toggleClass('coveo-normal-child-result', !this.showingMoreResults);\n                        Dom_1.$$(oneChild).toggleClass('coveo-expanded-child-result', this.showingMoreResults);\n                        return [4 /*yield*/, Initialization_1.Initialization.automaticallyCreateComponentsInsideResult(oneChild, childResult).initResult];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/, oneChild];\n                }\n            });\n        });\n    };\n    ResultFolding.prototype.cancelAnyPendingShowMore = function () {\n        if (this.moreResultsPromise) {\n            this.moreResultsPromise = undefined;\n        }\n        Assert_1.Assert.doesNotExists(this.moreResultsPromise);\n        Assert_1.Assert.doesNotExists(this.waitAnimation);\n    };\n    ResultFolding.prototype.bindOverlayEvents = function () {\n        var _this = this;\n        this.bind.one(this.element.parentElement, 'openCardOverlay', function () {\n            if (_this.result.moreResults) {\n                _this.showMoreResults();\n            }\n        });\n    };\n    ResultFolding.prototype.getAnalyticsMetadata = function () {\n        return {\n            documentURL: this.result.clickUri,\n            documentTitle: this.result.title,\n            author: Utils_1.Utils.getFieldValue(this.result, 'author')\n        };\n    };\n    ResultFolding.ID = 'ResultFolding';\n    ResultFolding.doExport = function () {\n        GlobalExports_1.exportGlobally({\n            ResultFolding: ResultFolding,\n            DefaultFoldingTemplate: DefaultFoldingTemplate_1.DefaultFoldingTemplate\n        });\n    };\n    /**\n     * The options for the component\n     * @componentOptions\n     */\n    ResultFolding.options = {\n        /**\n         * Specifies the template to use to render each of the child results for a top result.\n         *\n         * You can specify a previously registered template to use either by referring to its HTML `id` attribute or to a\n         * CSS selector (see {@link TemplateCache}).\n         *\n         * **Example:**\n         *\n         * Specifying a previously registered template by referring to its HTML `id` attribute:\n         *\n         * ```html\n         * <span class=\"CoveoResultFolding\" data-result-template-id=\"Foo\"></span>\n         * ```\n         *\n         * Specifying a previously registered template by referring to a CSS selector:\n         *\n         * ```html\n         * <span class='CoveoResultFolding' data-result-template-selector=\"#Foo\"></span>\n         * ```\n         *\n         * If you do not specify a custom folding template, the component uses the default result folding template.\n         */\n        resultTemplate: TemplateComponentOptions_1.TemplateComponentOptions.buildTemplateOption({ defaultFunction: function () { return new DefaultFoldingTemplate_1.DefaultFoldingTemplate(); } }),\n        /**\n         * Specifies the caption to display at the top of the child results when the folding result set is not expanded.\n         *\n         * Default value is `undefined`, which displays no caption.\n         */\n        normalCaption: ComponentOptions_1.ComponentOptions.buildLocalizedStringOption(),\n        /**\n         * Specifies the caption to display at the top of the child results when the folding result set is expanded.\n         *\n         * Default value is `undefined`, which displays no caption.\n         */\n        expandedCaption: ComponentOptions_1.ComponentOptions.buildLocalizedStringOption(),\n        /**\n         * Specifies the caption to display on the link to expand / show child results.\n         *\n         * Default value is the localized string for `ShowMore`.\n         */\n        moreCaption: ComponentOptions_1.ComponentOptions.buildLocalizedStringOption({ postProcessing: function (value) { return value || Strings_1.l('ShowMore'); } }),\n        /**\n         * Specifies the caption to display on the link to shrink the loaded folding result set back to only the top result.\n         *\n         * Default value is the localized string for `ShowLess`.\n         */\n        lessCaption: ComponentOptions_1.ComponentOptions.buildLocalizedStringOption({ postProcessing: function (value) { return value || Strings_1.l('ShowLess'); } }),\n        /**\n         * Specifies the caption to display when there is only one result in a folding result set.\n         *\n         * Default value is the localized string for `DisplayingTheOnlyMessage`\n         */\n        oneResultCaption: ComponentOptions_1.ComponentOptions.buildLocalizedStringOption({\n            postProcessing: function (value) { return value || Strings_1.l('DisplayingTheOnlyMessage'); }\n        })\n    };\n    return ResultFolding;\n}(Component_1.Component));\nexports.ResultFolding = ResultFolding;\nInitialization_1.Initialization.registerAutoCreateComponent(ResultFolding);\n\n\n/***/ }),\n\n/***/ 653:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Template_1 = __webpack_require__(27);\nvar DefaultFoldingTemplate = /** @class */ (function (_super) {\n    __extends(DefaultFoldingTemplate, _super);\n    function DefaultFoldingTemplate() {\n        return _super.call(this) || this;\n    }\n    DefaultFoldingTemplate.prototype.instantiateToString = function (queryResult) {\n        return '<div class=\"coveo-child-result\"><span class=\"CoveoIcon\" data-small=\"true\"></span> <a class=\"CoveoResultLink\"></a> <span class=\"CoveoQuickview\"></span></div>';\n    };\n    DefaultFoldingTemplate.prototype.getType = function () {\n        return 'DefaultFoldingTemplate';\n    };\n    return DefaultFoldingTemplate;\n}(Template_1.Template));\nexports.DefaultFoldingTemplate = DefaultFoldingTemplate;\n\n\n/***/ }),\n\n/***/ 654:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// ResultFolding.min__45edc409d97327d59af1.js","import { Template } from '../Templates/Template';\nimport { Component } from '../Base/Component';\nimport { IComponentBindings } from '../Base/ComponentBindings';\nimport { ComponentOptions } from '../Base/ComponentOptions';\nimport { DefaultFoldingTemplate } from './DefaultFoldingTemplate';\nimport { IQueryResult } from '../../rest/QueryResult';\nimport { Utils } from '../../utils/Utils';\nimport { QueryUtils } from '../../utils/QueryUtils';\nimport { Initialization } from '../Base/Initialization';\nimport { Assert } from '../../misc/Assert';\nimport { $$, Win } from '../../utils/Dom';\nimport { l } from '../../strings/Strings';\nimport { each, map } from 'underscore';\nimport { exportGlobally } from '../../GlobalExports';\nimport { analyticsActionCauseList, IAnalyticsDocumentViewMeta } from '../Analytics/AnalyticsActionListMeta';\nimport { Logger } from '../../misc/Logger';\n\nimport 'styling/_ResultFolding';\nimport { SVGIcons } from '../../utils/SVGIcons';\nimport { SVGDom } from '../../utils/SVGDom';\nimport { TemplateComponentOptions } from '../Base/TemplateComponentOptions';\nimport { AccessibleButton } from '../../utils/AccessibleButton';\n\nexport interface IResultFoldingOptions {\n  resultTemplate?: Template;\n  normalCaption?: string;\n  expandedCaption?: string;\n  moreCaption?: string;\n  lessCaption?: string;\n  oneResultCaption?: string;\n}\n\n/**\n * The `ResultFolding` component renders folded result sets. It is usable inside a result template when there is an\n * active [`Folding`]{@link Folding} component in the page. This component takes care of rendering the parent result and\n * its child results in a coherent manner.\n *\n * This component is a result template component (see [Result Templates](https://docs.coveo.com/en/413/)).\n *\n * See [Folding Results](https://docs.coveo.com/en/428/).\n */\nexport class ResultFolding extends Component {\n  static ID = 'ResultFolding';\n\n  static doExport = () => {\n    exportGlobally({\n      ResultFolding: ResultFolding,\n      DefaultFoldingTemplate: DefaultFoldingTemplate\n    });\n  };\n\n  /**\n   * The options for the component\n   * @componentOptions\n   */\n  static options: IResultFoldingOptions = {\n    /**\n     * Specifies the template to use to render each of the child results for a top result.\n     *\n     * You can specify a previously registered template to use either by referring to its HTML `id` attribute or to a\n     * CSS selector (see {@link TemplateCache}).\n     *\n     * **Example:**\n     *\n     * Specifying a previously registered template by referring to its HTML `id` attribute:\n     *\n     * ```html\n     * <span class=\"CoveoResultFolding\" data-result-template-id=\"Foo\"></span>\n     * ```\n     *\n     * Specifying a previously registered template by referring to a CSS selector:\n     *\n     * ```html\n     * <span class='CoveoResultFolding' data-result-template-selector=\"#Foo\"></span>\n     * ```\n     *\n     * If you do not specify a custom folding template, the component uses the default result folding template.\n     */\n    resultTemplate: TemplateComponentOptions.buildTemplateOption({ defaultFunction: () => new DefaultFoldingTemplate() }),\n\n    /**\n     * Specifies the caption to display at the top of the child results when the folding result set is not expanded.\n     *\n     * Default value is `undefined`, which displays no caption.\n     */\n    normalCaption: ComponentOptions.buildLocalizedStringOption(),\n\n    /**\n     * Specifies the caption to display at the top of the child results when the folding result set is expanded.\n     *\n     * Default value is `undefined`, which displays no caption.\n     */\n    expandedCaption: ComponentOptions.buildLocalizedStringOption(),\n\n    /**\n     * Specifies the caption to display on the link to expand / show child results.\n     *\n     * Default value is the localized string for `ShowMore`.\n     */\n    moreCaption: ComponentOptions.buildLocalizedStringOption({ postProcessing: value => value || l('ShowMore') }),\n\n    /**\n     * Specifies the caption to display on the link to shrink the loaded folding result set back to only the top result.\n     *\n     * Default value is the localized string for `ShowLess`.\n     */\n    lessCaption: ComponentOptions.buildLocalizedStringOption({ postProcessing: value => value || l('ShowLess') }),\n\n    /**\n     * Specifies the caption to display when there is only one result in a folding result set.\n     *\n     * Default value is the localized string for `DisplayingTheOnlyMessage`\n     */\n    oneResultCaption: ComponentOptions.buildLocalizedStringOption({\n      postProcessing: value => value || l('DisplayingTheOnlyMessage')\n    })\n  };\n\n  private normalCaption: HTMLElement;\n  private expandedCaption: HTMLElement;\n  private oneResultCaption: HTMLElement;\n  private results: HTMLElement;\n  private showMore: HTMLElement;\n  private showLess: HTMLElement;\n  private waitAnimation: HTMLElement;\n  private moreResultsPromise: Promise<IQueryResult[]>;\n  private showingMoreResults = false;\n\n  public childResults: IQueryResult[];\n\n  /**\n   * Creates a new ResultFolding component.\n   * @param options The options for the ResultFolding component.\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\n   * automatically resolved (with a slower execution time).\n   * @param result The result to associate the component with.\n   */\n  constructor(\n    public element: HTMLElement,\n    public options?: IResultFoldingOptions,\n    bindings?: IComponentBindings,\n    public result?: IQueryResult\n  ) {\n    super(element, ResultFolding.ID, bindings);\n\n    this.options = ComponentOptions.initComponentOptions(this.element, ResultFolding, options);\n\n    Assert.exists(result);\n\n    this.buildElements();\n    this.renderElements();\n  }\n\n  /**\n   * Show more results by fetching additional results from the index, which match the current folded conversation.\n   * This is the equivalent of clicking \"Show all conversation\".\n   * @returns {Promise<IQueryResult[]>}\n   */\n  public async showMoreResults() {\n    Assert.exists(this.result.moreResults);\n\n    this.cancelAnyPendingShowMore();\n    this.moreResultsPromise = this.result.moreResults();\n    this.waitAnimation = $$('div', { className: 'coveo-loading-spinner' }).el;\n    this.results.appendChild(this.waitAnimation);\n    this.updateElementVisibility();\n\n    const results = await this.moreResultsPromise;\n    this.childResults = results;\n    this.showingMoreResults = true;\n    this.usageAnalytics.logClickEvent<IAnalyticsDocumentViewMeta>(\n      analyticsActionCauseList.foldingShowMore,\n      this.getAnalyticsMetadata(),\n      this.result,\n      this.element\n    );\n\n    try {\n      await this.displayThoseResults(results);\n      this.updateElementVisibility(results.length);\n    } catch (e) {\n      const logger = new Logger(this);\n      logger.warn('An error occured when trying to display more results');\n    }\n\n    this.moreResultsPromise = undefined;\n    $$(this.waitAnimation).detach();\n    this.waitAnimation = undefined;\n\n    return results;\n  }\n\n  /**\n   * Show less results for a given conversation. This is the equivalent of clicking \"Show less\"\n   */\n  public async showLessResults() {\n    this.cancelAnyPendingShowMore();\n    this.showingMoreResults = false;\n    this.usageAnalytics.logCustomEvent<IAnalyticsDocumentViewMeta>(\n      analyticsActionCauseList.foldingShowLess,\n      this.getAnalyticsMetadata(),\n      this.element\n    );\n    await this.displayThoseResults(this.result.childResults);\n    this.updateElementVisibility();\n    this.scrollToResultElement();\n  }\n\n  private buildElements() {\n    this.buildHeader();\n    this.buildResults();\n    this.buildFooter();\n  }\n\n  private async renderElements() {\n    await this.displayThoseResults(this.result.childResults);\n    this.updateElementVisibility();\n\n    if ($$(this.element.parentElement).hasClass('CoveoCardOverlay')) {\n      this.bindOverlayEvents();\n    }\n\n    if (this.result.childResults.length == 0 && !this.result.moreResults) {\n      $$(this.element).hide();\n    }\n  }\n\n  private buildHeader() {\n    let header = $$('div', { className: 'coveo-folding-header' }).el;\n    this.element.appendChild(header);\n    if (this.options.normalCaption != undefined && this.options.expandedCaption != undefined) {\n      this.normalCaption = $$('div', { className: 'coveo-folding-normal-caption' }, this.options.normalCaption).el;\n      header.appendChild(this.normalCaption);\n\n      this.expandedCaption = $$('div', { className: 'coveo-folding-expanded-caption' }, this.options.expandedCaption).el;\n      header.appendChild(this.expandedCaption);\n    }\n    this.oneResultCaption = $$('div', { className: 'coveo-folding-oneresult-caption' }, this.options.oneResultCaption).el;\n    header.appendChild(this.oneResultCaption);\n  }\n\n  private buildResults() {\n    this.results = $$('div', { className: 'coveo-folding-results' }).el;\n    this.element.appendChild(this.results);\n  }\n\n  private buildFooter() {\n    const footer = $$('div', { className: 'coveo-folding-footer' }).el;\n    this.element.parentElement.appendChild(footer);\n\n    if (this.result.moreResults) {\n      this.showMore = $$('div', { className: 'coveo-folding-footer-section-for-less' }).el;\n      footer.appendChild(this.showMore);\n\n      this.showLess = $$('div', { className: 'coveo-folding-footer-section-for-more' }).el;\n      footer.appendChild(this.showLess);\n\n      const footerIconShowMore = $$(\n        'div',\n        { className: 'coveo-folding-more' },\n        $$('span', { className: 'coveo-folding-footer-icon' }, SVGIcons.icons.arrowDown).el\n      ).el;\n      SVGDom.addClassToSVGInContainer(footerIconShowMore, 'coveo-folding-more-svg');\n\n      const footerIconShowLess = $$(\n        'div',\n        { className: 'coveo-folding-less' },\n        $$('span', { className: 'coveo-folding-footer-icon' }, SVGIcons.icons.arrowUp).el\n      ).el;\n      SVGDom.addClassToSVGInContainer(footerIconShowLess, 'coveo-folding-less-svg');\n\n      const showMoreLink = $$('a', { className: 'coveo-folding-show-more' }, this.options.moreCaption).el;\n      const showLessLink = $$('a', { className: 'coveo-folding-show-less' }, this.options.lessCaption).el;\n\n      new AccessibleButton()\n        .withElement(this.showMore)\n        .withLabel(this.options.moreCaption)\n        .withSelectAction(() => this.showMoreResults())\n        .build();\n\n      new AccessibleButton()\n        .withElement(this.showLess)\n        .withLabel(this.options.lessCaption)\n        .withSelectAction(() => this.showLessResults())\n        .build();\n\n      this.showMore.appendChild(showMoreLink);\n      this.showLess.appendChild(showLessLink);\n      this.showMore.appendChild(footerIconShowMore);\n      this.showLess.appendChild(footerIconShowLess);\n    }\n  }\n\n  private updateElementVisibility(subResultsLength?: number) {\n    if (this.normalCaption) {\n      $$(this.normalCaption).toggle(!this.showingMoreResults && this.result.childResults.length > 0);\n    }\n    if (this.expandedCaption) {\n      $$(this.expandedCaption).toggle(this.showingMoreResults);\n    }\n    $$(this.oneResultCaption).toggleClass('coveo-hidden', !(subResultsLength && subResultsLength == 1));\n\n    if (this.showMore) {\n      $$(this.showMore).toggleClass('coveo-visible', !this.showingMoreResults && !Utils.exists(this.moreResultsPromise));\n      $$(this.showLess).toggleClass('coveo-visible', this.showingMoreResults);\n    }\n\n    let showIfNormal = $$(this.element).find('.coveo-show-if-normal');\n    if (showIfNormal) {\n      $$(showIfNormal).toggle(!this.showingMoreResults);\n    }\n\n    let showIfExpanded = $$(this.element).find('.coveo-show-if-expanded');\n    if (showIfExpanded) {\n      $$(showIfExpanded).toggle(this.showingMoreResults);\n    }\n  }\n\n  private scrollToResultElement() {\n    let resultElem = $$(this.element).closest('CoveoResult');\n    window.scrollTo(0, new Win(window).scrollY() + resultElem.getBoundingClientRect().top);\n  }\n\n  private async displayThoseResults(results: IQueryResult[]): Promise<boolean> {\n    const childResultsPromises = map(results, result => {\n      return this.renderChildResult(result);\n    });\n\n    const childsToAppend: HTMLElement[] = await Promise.all(childResultsPromises);\n    $$(this.results).empty();\n    each(childsToAppend, oneChild => {\n      this.results.appendChild(oneChild);\n    });\n    return true;\n  }\n\n  private async renderChildResult(childResult: IQueryResult): Promise<HTMLElement> {\n    QueryUtils.setStateObjectOnQueryResult(this.queryStateModel.get(), childResult);\n    QueryUtils.setSearchInterfaceObjectOnQueryResult(this.searchInterface, childResult);\n\n    const oneChild: HTMLElement = await this.options.resultTemplate.instantiateToElement(childResult, {\n      wrapInDiv: false,\n      checkCondition: false,\n      responsiveComponents: this.searchInterface.responsiveComponents\n    });\n\n    $$(oneChild).addClass('coveo-result-folding-child-result');\n    $$(oneChild).toggleClass('coveo-normal-child-result', !this.showingMoreResults);\n    $$(oneChild).toggleClass('coveo-expanded-child-result', this.showingMoreResults);\n\n    await Initialization.automaticallyCreateComponentsInsideResult(oneChild, childResult).initResult;\n    return oneChild;\n  }\n\n  private cancelAnyPendingShowMore() {\n    if (this.moreResultsPromise) {\n      this.moreResultsPromise = undefined;\n    }\n\n    Assert.doesNotExists(this.moreResultsPromise);\n    Assert.doesNotExists(this.waitAnimation);\n  }\n\n  private bindOverlayEvents() {\n    this.bind.one(this.element.parentElement, 'openCardOverlay', () => {\n      if (this.result.moreResults) {\n        this.showMoreResults();\n      }\n    });\n  }\n\n  private getAnalyticsMetadata(): IAnalyticsDocumentViewMeta {\n    return {\n      documentURL: this.result.clickUri,\n      documentTitle: this.result.title,\n      author: Utils.getFieldValue(this.result, 'author')\n    };\n  }\n}\n\nInitialization.registerAutoCreateComponent(ResultFolding);\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResultFolding/ResultFolding.ts","import { Template } from '../Templates/Template';\nimport { IQueryResult } from '../../rest/QueryResult';\n\nexport class DefaultFoldingTemplate extends Template {\n  constructor() {\n    super();\n  }\n\n  instantiateToString(queryResult?: IQueryResult): string {\n    return '<div class=\"coveo-child-result\"><span class=\"CoveoIcon\" data-small=\"true\"></span> <a class=\"CoveoResultLink\"></a> <span class=\"CoveoQuickview\"></span></div>';\n  }\n\n  getType() {\n    return 'DefaultFoldingTemplate';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ResultFolding/DefaultFoldingTemplate.ts"],"sourceRoot":""}