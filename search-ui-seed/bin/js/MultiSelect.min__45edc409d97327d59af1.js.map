{"version":3,"sources":["MultiSelect.min__45edc409d97327d59af1.js","./src/ui/FormWidgets/MultiSelect.ts"],"names":["webpackJsonpCoveo__temporary","190","module","exports","__webpack_require__","Object","defineProperty","value","onChange","options","label","multiSelect","this","buildContent","doExport","exportGlobally","MultiSelect","build","element","getElement","getValue","_","chain","toArray","filter","opt","selected","map","getUnselectedValues","setValue","values","currentlySelected","currentStateSplit","partition","contains","newStateToApplySplit","each","toSelect","toUnSelect","hasChanged","Utils","arrayEqual","$$","trigger","reset","selectedIndex","isEmptyArray","className","multiple","size","length","toString","el","optgroup","l","append","appendChild","on","573"],"mappings":"AAAAA,8BAA8B,KAExBC,IACA,SAAUC,EAAQC,EAASC,GAEjC,YAEAC,QAAOC,eAAeH,EAAS,cAAgBI,OAAO,GCNtD,YACA,OACA,MACA,OACA,YACA,OAKA,aAgBE,WACSC,EACAC,EACAC,OAFA,KAAAF,MAAA,SAAgDG,MAAhD,KAAAH,WACA,KAAAC,UACA,KAAAC,QAEPE,KAAKC,eAmGT,MArHS,GAAAC,SAAP,WACE,EAAAC,gBACEC,YAAaA,KAuBV,YAAAC,MAAP,WACE,MAAOL,MAAKM,SAOP,YAAAC,WAAP,WACE,MAAOP,MAAKM,SAOP,YAAAE,SAAP,WACE,MAAOC,GAAEC,MAAWV,KAAKM,QAAQT,SAC9Bc,UACAC,OAAO,SAACC,GAA2B,MAAAA,GAAIC,WACvCC,IAAI,SAACD,GAAgC,MAAAA,GAASnB,QAC9CA,SAOE,YAAAqB,oBAAP,WACE,MAAOP,GAAEC,MAAWV,KAAKM,QAAQT,SAC9Bc,UACAC,OAAO,SAACC,GAA2B,OAACA,EAAIC,WACxCC,IAAI,SAACD,GAAgC,MAAAA,GAASnB,QAC9CA,SAOE,YAAAsB,SAAP,SAAgBC,GACd,GAAMC,GAAoBnB,KAAKQ,WAEzBY,EAAoBX,EAAEY,UAAUZ,EAAEE,QAAQX,KAAKM,QAAQT,SAAU,SAACgB,GACtE,MAAAJ,GAAEa,SAASH,EAAmBN,EAAIlB,SAE9B4B,EAAuBd,EAAEY,UAAUZ,EAAEE,QAAQX,KAAKM,QAAQT,SAAU,SAACgB,GAA2B,MAAAJ,GAAEa,SAASJ,EAAQL,EAAIlB,QAE7Hc,GAAEe,KAAKD,EAAqB,GAAI,SAACE,GAAgC,MAACA,GAASX,UAAW,IACtFL,EAAEe,KAAKD,EAAqB,GAAI,SAACG,GAAkC,MAACA,GAAWZ,UAAW,GAE1F,IAAIa,IAAa,CACZ,GAAAC,MAAMC,WAAWT,EAAkB,GAAIG,EAAqB,IAAI,KACnEI,GAAa,GAEV,EAAAC,MAAMC,WAAWT,EAAkB,GAAIG,EAAqB,IAAI,KACnEI,GAAa,GAGXA,GACF,EAAAG,GAAG9B,KAAKM,SAASyB,QAAQ,WAOtB,YAAAC,MAAP,WACE,GAAMb,GAAoBnB,KAAKQ,UAC/BR,MAAKM,QAAQ2B,eAAiB,EACzB,EAAAL,MAAMM,aAAaf,IACtB,EAAAW,GAAG9B,KAAKM,SAASyB,QAAQ,WAIrB,YAAA9B,aAAR,qBACED,MAAKM,QAA6B,EAAAwB,GAAG,UACnCK,UAAW,qBACXC,SAAU,GACVC,KAAMrC,KAAKH,QAAQyC,OAAOC,aACzBC,EACH,IAAMC,GAAW,EAAAX,GAAG,YAClBK,UAAW,mBACXrC,MAAOE,KAAKF,QAERD,EAAUY,EAAEM,IAAIf,KAAKH,QAAS,SAAAgB,GAClC,MAAO,GAAAiB,GAAG,UAAYnC,MAAOkB,EAAKsB,UAAW,mBAAqB,EAAAO,EAAE7B,KAEtEJ,GAAEe,KAAK3B,EAAS,SAAAgB,GAAO,MAAA4B,GAASE,OAAO9B,EAAI2B,MAC3CxC,KAAKM,QAAQsC,YAAYH,EAASD,IAClC,EAAAV,GAAG9B,KAAKM,SAASuC,GAAG,SAAU,WAAM,SAAKjD,SAAS,MAEtD,IAxHa,GAAAQ,eDwHP0C,IACA,SAAUxD,EAAQC","file":"MultiSelect.min__45edc409d97327d59af1.js","sourcesContent":["webpackJsonpCoveo__temporary([54],{\n\n/***/ 190:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Dom_1 = __webpack_require__(1);\nvar _ = __webpack_require__(0);\nvar Strings_1 = __webpack_require__(6);\n__webpack_require__(573);\nvar Utils_1 = __webpack_require__(4);\nvar GlobalExports_1 = __webpack_require__(3);\n/**\n * A multi select widget with standard styling.\n */\nvar MultiSelect = /** @class */ (function () {\n    /**\n     * Creates a new `MultiSelect`.\n     * @param onChange The function to call when the widget selected values change. This function takes the current\n     * `MultiSelect` instance as an argument.\n     * @param options The values which can be selected with the multi select.\n     * @param label The label to display for the multi select.\n     */\n    function MultiSelect(onChange, options, label) {\n        if (onChange === void 0) { onChange = function (multiSelect) { }; }\n        this.onChange = onChange;\n        this.options = options;\n        this.label = label;\n        this.buildContent();\n    }\n    MultiSelect.doExport = function () {\n        GlobalExports_1.exportGlobally({\n            MultiSelect: MultiSelect\n        });\n    };\n    /**\n     * Gets the element on which the multi select is bound.\n     * @returns {HTMLSelectElement} The multi select element.\n     */\n    MultiSelect.prototype.build = function () {\n        return this.element;\n    };\n    /**\n     * Gets the element on which the multi select is bound.\n     * @returns {HTMLSelectElement} The multi select element.\n     */\n    MultiSelect.prototype.getElement = function () {\n        return this.element;\n    };\n    /**\n     * Gets the currently selected values.\n     * @returns {string[]} The array of selected multi select values.\n     */\n    MultiSelect.prototype.getValue = function () {\n        return _.chain(this.element.options)\n            .toArray()\n            .filter(function (opt) { return opt.selected; })\n            .map(function (selected) { return selected.value; })\n            .value();\n    };\n    /**\n     * Gets the currently un-selected values.\n     * @returns {string[]} The array of un-selected multi select values.\n     */\n    MultiSelect.prototype.getUnselectedValues = function () {\n        return _.chain(this.element.options)\n            .toArray()\n            .filter(function (opt) { return !opt.selected; })\n            .map(function (selected) { return selected.value; })\n            .value();\n    };\n    /**\n     * Sets the currently selected values.\n     * @param values The values to select.\n     */\n    MultiSelect.prototype.setValue = function (values) {\n        var currentlySelected = this.getValue();\n        var currentStateSplit = _.partition(_.toArray(this.element.options), function (opt) {\n            return _.contains(currentlySelected, opt.value);\n        });\n        var newStateToApplySplit = _.partition(_.toArray(this.element.options), function (opt) { return _.contains(values, opt.value); });\n        _.each(newStateToApplySplit[0], function (toSelect) { return (toSelect.selected = true); });\n        _.each(newStateToApplySplit[1], function (toUnSelect) { return (toUnSelect.selected = false); });\n        var hasChanged = false;\n        if (!Utils_1.Utils.arrayEqual(currentStateSplit[0], newStateToApplySplit[0], false)) {\n            hasChanged = true;\n        }\n        if (!Utils_1.Utils.arrayEqual(currentStateSplit[1], newStateToApplySplit[1], false)) {\n            hasChanged = true;\n        }\n        if (hasChanged) {\n            Dom_1.$$(this.element).trigger('change');\n        }\n    };\n    /**\n     * Resets the multi select.\n     */\n    MultiSelect.prototype.reset = function () {\n        var currentlySelected = this.getValue();\n        this.element.selectedIndex = -1;\n        if (!Utils_1.Utils.isEmptyArray(currentlySelected)) {\n            Dom_1.$$(this.element).trigger('change');\n        }\n    };\n    MultiSelect.prototype.buildContent = function () {\n        var _this = this;\n        this.element = Dom_1.$$('select', {\n            className: 'coveo-multi-select',\n            multiple: '',\n            size: this.options.length.toString()\n        }).el;\n        var optgroup = Dom_1.$$('optgroup', {\n            className: 'coveo-list-group',\n            label: this.label\n        });\n        var options = _.map(this.options, function (opt) {\n            return Dom_1.$$('option', { value: opt, className: 'coveo-list-item' }, Strings_1.l(opt));\n        });\n        _.each(options, function (opt) { return optgroup.append(opt.el); });\n        this.element.appendChild(optgroup.el);\n        Dom_1.$$(this.element).on('change', function () { return _this.onChange(_this); });\n    };\n    return MultiSelect;\n}());\nexports.MultiSelect = MultiSelect;\n\n\n/***/ }),\n\n/***/ 573:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// MultiSelect.min__45edc409d97327d59af1.js","import { IFormWidget, IFormWidgetSettable } from './FormWidgets';\nimport { $$ } from '../../utils/Dom';\nimport * as _ from 'underscore';\nimport { l } from '../../strings/Strings';\nimport 'styling/vapor/_MultiSelect';\nimport { Utils } from '../../utils/Utils';\nimport { exportGlobally } from '../../GlobalExports';\n\n/**\n * A multi select widget with standard styling.\n */\nexport class MultiSelect implements IFormWidget, IFormWidgetSettable {\n  private element: HTMLSelectElement;\n\n  static doExport() {\n    exportGlobally({\n      MultiSelect: MultiSelect\n    });\n  }\n\n  /**\n   * Creates a new `MultiSelect`.\n   * @param onChange The function to call when the widget selected values change. This function takes the current\n   * `MultiSelect` instance as an argument.\n   * @param options The values which can be selected with the multi select.\n   * @param label The label to display for the multi select.\n   */\n  constructor(\n    public onChange: (multiSelect: MultiSelect) => void = (multiSelect: MultiSelect) => {},\n    public options: string[],\n    public label: string\n  ) {\n    this.buildContent();\n  }\n\n  /**\n   * Gets the element on which the multi select is bound.\n   * @returns {HTMLSelectElement} The multi select element.\n   */\n  public build(): HTMLElement {\n    return this.element;\n  }\n\n  /**\n   * Gets the element on which the multi select is bound.\n   * @returns {HTMLSelectElement} The multi select element.\n   */\n  public getElement(): HTMLElement {\n    return this.element;\n  }\n\n  /**\n   * Gets the currently selected values.\n   * @returns {string[]} The array of selected multi select values.\n   */\n  public getValue(): string[] {\n    return _.chain(<any>this.element.options)\n      .toArray()\n      .filter((opt: HTMLOptionElement) => opt.selected)\n      .map((selected: HTMLOptionElement) => selected.value)\n      .value();\n  }\n\n  /**\n   * Gets the currently un-selected values.\n   * @returns {string[]} The array of un-selected multi select values.\n   */\n  public getUnselectedValues(): string[] {\n    return _.chain(<any>this.element.options)\n      .toArray()\n      .filter((opt: HTMLOptionElement) => !opt.selected)\n      .map((selected: HTMLOptionElement) => selected.value)\n      .value();\n  }\n\n  /**\n   * Sets the currently selected values.\n   * @param values The values to select.\n   */\n  public setValue(values: string[]) {\n    const currentlySelected = this.getValue();\n\n    const currentStateSplit = _.partition(_.toArray(this.element.options), (opt: HTMLOptionElement) =>\n      _.contains(currentlySelected, opt.value)\n    );\n    const newStateToApplySplit = _.partition(_.toArray(this.element.options), (opt: HTMLOptionElement) => _.contains(values, opt.value));\n\n    _.each(newStateToApplySplit[0], (toSelect: HTMLOptionElement) => (toSelect.selected = true));\n    _.each(newStateToApplySplit[1], (toUnSelect: HTMLOptionElement) => (toUnSelect.selected = false));\n\n    let hasChanged = false;\n    if (!Utils.arrayEqual(currentStateSplit[0], newStateToApplySplit[0], false)) {\n      hasChanged = true;\n    }\n    if (!Utils.arrayEqual(currentStateSplit[1], newStateToApplySplit[1], false)) {\n      hasChanged = true;\n    }\n\n    if (hasChanged) {\n      $$(this.element).trigger('change');\n    }\n  }\n\n  /**\n   * Resets the multi select.\n   */\n  public reset() {\n    const currentlySelected = this.getValue();\n    this.element.selectedIndex = -1;\n    if (!Utils.isEmptyArray(currentlySelected)) {\n      $$(this.element).trigger('change');\n    }\n  }\n\n  private buildContent() {\n    this.element = <HTMLSelectElement>$$('select', {\n      className: 'coveo-multi-select',\n      multiple: '',\n      size: this.options.length.toString()\n    }).el;\n    const optgroup = $$('optgroup', {\n      className: 'coveo-list-group',\n      label: this.label\n    });\n    const options = _.map(this.options, opt => {\n      return $$('option', { value: opt, className: 'coveo-list-item' }, l(opt));\n    });\n    _.each(options, opt => optgroup.append(opt.el));\n    this.element.appendChild(optgroup.el);\n    $$(this.element).on('change', () => this.onChange(this));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/FormWidgets/MultiSelect.ts"],"sourceRoot":""}