{"version":3,"sources":["SmartSnippetSuggestions.min__45edc409d97327d59af1.js","./src/ui/SmartSnippet/SmartSnippetSuggestions.ts","./src/misc/AttachShadowPolyfill.ts","./src/ui/SmartSnippet/SmartSnippetCollapsibleSuggestion.ts"],"names":["webpackJsonpCoveo__temporary","296","module","exports","__webpack_require__","__extends","this","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","value","QUESTIONS_LIST_TITLE_CLASSNAME","QUESTIONS_LIST_CLASSNAME","SmartSnippetSuggestionsClassNames","HAS_QUESTIONS_CLASSNAME","BASE_CLASSNAME","element","options","bindings","SmartSnippetSuggestions","ID","titleId","uniqueId","bind","onRootElement","QueryEvents","deferredQuerySuccess","data","handleQuerySuccess","_this","get","contentLoaded","enumerable","configurable","getCorrespondingResult","questionAnswer","find","queryController","getLastResults","results","result","raw","documentId","contentIdKey","contentIdValue","hasQuestions","relatedQuestions","length","$$","toggleClass","renderedQuestionAnswer","isEqual","detachContent","appendChild","title","buildTitle","el","questionAnswers","buildQuestionAnswers","detach","className","id","l","innerCSS","getInnerCSS","answers","map","SmartSnippetCollapsibleSuggestion","container","ariaLabelledby","answer","build","Promise","all","loading","children","filter","HTMLScriptElement","type","toLowerCase","innerHTML","join","doExport","exportGlobally","Component","Initialization","registerAutoCreateComponent","517","init","__awaiter","iframe","onLoad","iframeBody","shadowRoot","__generator","_a","label","scrolling","resolve","addEventListener","contentDocument","body","style","margin","autoUpdateHeight","mode","elementToResize","content","MutationObserver","height","clientHeight","observe","attributes","characterData","childList","subtree","thisArg","_arguments","P","generator","reject","fulfilled","step","next","e","rejected","done","then","apply","verb","n","v","op","f","TypeError","_","y","t","call","ops","pop","trys","push","g","sent","throw","return","Symbol","iterator","582","702","703","QUESTION_CLASSNAME","QUESTION_TITLE_CLASSNAME","QUESTION_TITLE_LABEL_CLASSNAME","QUESTION_TITLE_CHECKBOX_CLASSNAME","QUESTION_SNIPPET_CLASSNAME","QUESTION_SNIPPET_HIDDEN_CLASSNAME","SHADOW_CLASSNAME","RAW_CONTENT_CLASSNAME","SOURCE_CLASSNAME","SmartSnippetCollapsibleSuggestionClassNames","SOURCE_TITLE_CLASSNAME","SOURCE_URL_CLASSNAME","source","labelId","snippetId","checkboxId","expanded","collapsibleContainer","buildCollapsibleContainer","answerSnippet","question","buildStyle","updateExpanded","styleTag","document","createElement","checkbox","buildCheckbox","text","on","toggle","role","tabindex","ariaControls","AccessibleButton","withElement","withLabel","withEnterKeyboardAction","shadowContainer","attachShadow","buildAnswerSnippetContent","append","buildSourceUrl","clickUri","buildSourceTitle","snippet","buildLink","url","href","innerText","setAttribute","toString","setHtml","SVGIcons","icons","arrowUp","arrowDown"],"mappings":"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","file":"SmartSnippetSuggestions.min__45edc409d97327d59af1.js","sourcesContent":["webpackJsonpCoveo__temporary([28],{\n\n/***/ 296:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__webpack_require__(702);\nvar Component_1 = __webpack_require__(7);\nvar GlobalExports_1 = __webpack_require__(3);\nvar QueryEvents_1 = __webpack_require__(11);\nvar Dom_1 = __webpack_require__(1);\nvar underscore_1 = __webpack_require__(0);\nvar SmartSnippetCollapsibleSuggestion_1 = __webpack_require__(703);\nvar Strings_1 = __webpack_require__(6);\nvar Initialization_1 = __webpack_require__(2);\nvar BASE_CLASSNAME = 'coveo-smart-snippet-suggestions';\nvar HAS_QUESTIONS_CLASSNAME = BASE_CLASSNAME + \"-has-questions\";\nvar QUESTIONS_LIST_CLASSNAME = BASE_CLASSNAME + \"-questions\";\nvar QUESTIONS_LIST_TITLE_CLASSNAME = QUESTIONS_LIST_CLASSNAME + \"-title\";\nexports.SmartSnippetSuggestionsClassNames = {\n    HAS_QUESTIONS_CLASSNAME: HAS_QUESTIONS_CLASSNAME,\n    QUESTIONS_LIST_CLASSNAME: QUESTIONS_LIST_CLASSNAME,\n    QUESTIONS_LIST_TITLE_CLASSNAME: QUESTIONS_LIST_TITLE_CLASSNAME\n};\nvar SmartSnippetSuggestions = /** @class */ (function (_super) {\n    __extends(SmartSnippetSuggestions, _super);\n    function SmartSnippetSuggestions(element, options, bindings) {\n        var _this = _super.call(this, element, SmartSnippetSuggestions.ID, bindings) || this;\n        _this.element = element;\n        _this.options = options;\n        _this.titleId = underscore_1.uniqueId(QUESTIONS_LIST_TITLE_CLASSNAME);\n        _this.bind.onRootElement(QueryEvents_1.QueryEvents.deferredQuerySuccess, function (data) { return _this.handleQuerySuccess(data); });\n        return _this;\n    }\n    Object.defineProperty(SmartSnippetSuggestions.prototype, \"loading\", {\n        get: function () {\n            return this.contentLoaded;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @warning This method only works for the demo. In practice, the source of the answer will not always be part of the results.\n     */\n    SmartSnippetSuggestions.prototype.getCorrespondingResult = function (questionAnswer) {\n        return underscore_1.find(this.queryController.getLastResults().results, function (result) { return result.raw[questionAnswer.documentId.contentIdKey] === questionAnswer.documentId.contentIdValue; });\n    };\n    SmartSnippetSuggestions.prototype.handleQuerySuccess = function (data) {\n        var questionAnswer = data.results.questionAnswer;\n        var hasQuestions = !!(questionAnswer && questionAnswer.relatedQuestions.length);\n        Dom_1.$$(this.element).toggleClass(HAS_QUESTIONS_CLASSNAME, hasQuestions);\n        if (hasQuestions) {\n            if (this.renderedQuestionAnswer && underscore_1.isEqual(questionAnswer, this.renderedQuestionAnswer)) {\n                return;\n            }\n            this.detachContent();\n            this.element.appendChild((this.title = this.buildTitle()).el);\n            this.element.appendChild((this.questionAnswers = this.buildQuestionAnswers(questionAnswer.relatedQuestions)).el);\n        }\n        else {\n            this.detachContent();\n        }\n        this.renderedQuestionAnswer = questionAnswer;\n    };\n    SmartSnippetSuggestions.prototype.detachContent = function () {\n        this.title && this.title.detach();\n        this.questionAnswers && this.questionAnswers.detach();\n        this.title = this.questionAnswers = null;\n    };\n    SmartSnippetSuggestions.prototype.buildTitle = function () {\n        return Dom_1.$$('span', { className: QUESTIONS_LIST_TITLE_CLASSNAME, id: this.titleId }, Strings_1.l('SuggestedQuestions'));\n    };\n    SmartSnippetSuggestions.prototype.buildQuestionAnswers = function (questionAnswers) {\n        var _this = this;\n        var innerCSS = this.getInnerCSS();\n        var answers = questionAnswers.map(function (questionAnswer) { return new SmartSnippetCollapsibleSuggestion_1.SmartSnippetCollapsibleSuggestion(questionAnswer, innerCSS, _this.getCorrespondingResult(questionAnswer)); });\n        var container = Dom_1.$$.apply(void 0, ['ul',\n            { className: QUESTIONS_LIST_CLASSNAME, ariaLabelledby: this.titleId }].concat(answers.map(function (answer) { return answer.build(); })));\n        this.contentLoaded = Promise.all(answers.map(function (answer) { return answer.loading; }));\n        return container;\n    };\n    SmartSnippetSuggestions.prototype.getInnerCSS = function () {\n        return Dom_1.$$(this.element)\n            .children()\n            .filter(function (element) { return element instanceof HTMLScriptElement && element.type.toLowerCase() === 'text/css'; })\n            .map(function (element) { return element.innerHTML; })\n            .join('\\n');\n    };\n    SmartSnippetSuggestions.ID = 'SmartSnippetSuggestions';\n    SmartSnippetSuggestions.doExport = function () {\n        GlobalExports_1.exportGlobally({\n            SmartSnippetSuggestions: SmartSnippetSuggestions\n        });\n    };\n    return SmartSnippetSuggestions;\n}(Component_1.Component));\nexports.SmartSnippetSuggestions = SmartSnippetSuggestions;\nInitialization_1.Initialization.registerAutoCreateComponent(SmartSnippetSuggestions);\nSmartSnippetSuggestions.doExport();\n\n\n/***/ }),\n\n/***/ 517:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Dom_1 = __webpack_require__(1);\n__webpack_require__(582);\nfunction attachShadow(element, init) {\n    return __awaiter(this, void 0, void 0, function () {\n        var iframe, onLoad, iframeBody, shadowRoot;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    iframe = Dom_1.$$('iframe', { className: 'coveo-shadow-iframe', scrolling: 'no', title: init.title }).el;\n                    onLoad = new Promise(function (resolve) { return iframe.addEventListener('load', function () { return resolve(); }); });\n                    element.appendChild(iframe);\n                    return [4 /*yield*/, onLoad];\n                case 1:\n                    _a.sent();\n                    iframeBody = iframe.contentDocument.body;\n                    iframeBody.style.margin = '0';\n                    shadowRoot = Dom_1.$$('div', { style: 'overflow: auto;' }).el;\n                    iframeBody.appendChild(shadowRoot);\n                    autoUpdateHeight(iframe, shadowRoot);\n                    if (init.mode === 'open') {\n                        Object.defineProperty(element, 'shadowRoot', { get: function () { return shadowRoot; } });\n                    }\n                    return [2 /*return*/, shadowRoot];\n            }\n        });\n    });\n}\nexports.attachShadow = attachShadow;\nfunction autoUpdateHeight(elementToResize, content) {\n    var heightObserver = new MutationObserver(function () {\n        elementToResize.style.height = content.clientHeight + \"px\";\n    });\n    heightObserver.observe(content, {\n        attributes: true,\n        characterData: true,\n        childList: true,\n        subtree: true\n    });\n}\n\n\n/***/ }),\n\n/***/ 582:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 702:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 703:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar underscore_1 = __webpack_require__(0);\nvar AccessibleButton_1 = __webpack_require__(15);\nvar SVGIcons_1 = __webpack_require__(12);\nvar AttachShadowPolyfill_1 = __webpack_require__(517);\nvar Dom_1 = __webpack_require__(1);\nvar Strings_1 = __webpack_require__(6);\nvar QUESTION_CLASSNAME = \"coveo-smart-snippet-suggestions-question\";\nvar QUESTION_TITLE_CLASSNAME = QUESTION_CLASSNAME + \"-title\";\nvar QUESTION_TITLE_LABEL_CLASSNAME = QUESTION_TITLE_CLASSNAME + \"-label\";\nvar QUESTION_TITLE_CHECKBOX_CLASSNAME = QUESTION_TITLE_CLASSNAME + \"-checkbox\";\nvar QUESTION_SNIPPET_CLASSNAME = QUESTION_CLASSNAME + \"-snippet\";\nvar QUESTION_SNIPPET_HIDDEN_CLASSNAME = QUESTION_SNIPPET_CLASSNAME + \"-hidden\";\nvar SHADOW_CLASSNAME = QUESTION_SNIPPET_CLASSNAME + \"-content\";\nvar RAW_CONTENT_CLASSNAME = SHADOW_CLASSNAME + \"-raw\";\nvar SOURCE_CLASSNAME = QUESTION_CLASSNAME + \"-source\";\nvar SOURCE_TITLE_CLASSNAME = SOURCE_CLASSNAME + \"-title\";\nvar SOURCE_URL_CLASSNAME = SOURCE_CLASSNAME + \"-url\";\nexports.SmartSnippetCollapsibleSuggestionClassNames = {\n    QUESTION_CLASSNAME: QUESTION_CLASSNAME,\n    QUESTION_TITLE_CLASSNAME: QUESTION_TITLE_CLASSNAME,\n    QUESTION_TITLE_LABEL_CLASSNAME: QUESTION_TITLE_LABEL_CLASSNAME,\n    QUESTION_TITLE_CHECKBOX_CLASSNAME: QUESTION_TITLE_CHECKBOX_CLASSNAME,\n    QUESTION_SNIPPET_CLASSNAME: QUESTION_SNIPPET_CLASSNAME,\n    QUESTION_SNIPPET_HIDDEN_CLASSNAME: QUESTION_SNIPPET_HIDDEN_CLASSNAME,\n    SHADOW_CLASSNAME: SHADOW_CLASSNAME,\n    RAW_CONTENT_CLASSNAME: RAW_CONTENT_CLASSNAME,\n    SOURCE_CLASSNAME: SOURCE_CLASSNAME,\n    SOURCE_TITLE_CLASSNAME: SOURCE_TITLE_CLASSNAME,\n    SOURCE_URL_CLASSNAME: SOURCE_URL_CLASSNAME\n};\nvar SmartSnippetCollapsibleSuggestion = /** @class */ (function () {\n    function SmartSnippetCollapsibleSuggestion(questionAnswer, innerCSS, source) {\n        this.questionAnswer = questionAnswer;\n        this.innerCSS = innerCSS;\n        this.source = source;\n        this.labelId = underscore_1.uniqueId(QUESTION_TITLE_LABEL_CLASSNAME);\n        this.snippetId = underscore_1.uniqueId(QUESTION_SNIPPET_CLASSNAME);\n        this.checkboxId = underscore_1.uniqueId(QUESTION_TITLE_CHECKBOX_CLASSNAME);\n        this.expanded = false;\n    }\n    Object.defineProperty(SmartSnippetCollapsibleSuggestion.prototype, \"loading\", {\n        get: function () {\n            return this.contentLoaded;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SmartSnippetCollapsibleSuggestion.prototype.build = function () {\n        var collapsibleContainer = this.buildCollapsibleContainer(this.questionAnswer.answerSnippet, this.questionAnswer.question, this.innerCSS && this.buildStyle(this.innerCSS));\n        var title = this.buildTitle(this.questionAnswer.question);\n        this.updateExpanded();\n        return Dom_1.$$('li', {\n            className: QUESTION_CLASSNAME,\n            ariaLabelledby: this.labelId\n        }, title, collapsibleContainer).el;\n    };\n    SmartSnippetCollapsibleSuggestion.prototype.buildStyle = function (innerCSS) {\n        var styleTag = document.createElement('style');\n        styleTag.innerHTML = innerCSS;\n        return styleTag;\n    };\n    SmartSnippetCollapsibleSuggestion.prototype.buildTitle = function (question) {\n        var _this = this;\n        var checkbox = this.buildCheckbox(question);\n        var label = Dom_1.$$('span', { className: QUESTION_TITLE_LABEL_CLASSNAME, id: this.labelId });\n        label.text(question);\n        var title = Dom_1.$$('span', { className: QUESTION_TITLE_CLASSNAME }, label, checkbox);\n        title.on('click', function () { return _this.toggle(); });\n        return title;\n    };\n    SmartSnippetCollapsibleSuggestion.prototype.buildCheckbox = function (question) {\n        var _this = this;\n        this.checkbox = Dom_1.$$('div', {\n            role: 'button',\n            tabindex: 0,\n            ariaControls: this.snippetId,\n            className: QUESTION_TITLE_CHECKBOX_CLASSNAME,\n            id: this.checkboxId\n        });\n        new AccessibleButton_1.AccessibleButton()\n            .withElement(this.checkbox)\n            .withLabel(Strings_1.l('ExpandQuestionAnswer', question))\n            .withEnterKeyboardAction(function () { return _this.toggle(); })\n            .build();\n        return this.checkbox;\n    };\n    SmartSnippetCollapsibleSuggestion.prototype.buildCollapsibleContainer = function (innerHTML, title, style) {\n        var _this = this;\n        var shadowContainer = Dom_1.$$('div', { className: SHADOW_CLASSNAME });\n        this.collapsibleContainer = Dom_1.$$('div', { className: QUESTION_SNIPPET_CLASSNAME, id: this.snippetId }, shadowContainer);\n        this.contentLoaded = AttachShadowPolyfill_1.attachShadow(shadowContainer.el, { mode: 'open', title: Strings_1.l('AnswerSpecificSnippet', title) }).then(function (shadowRoot) {\n            shadowRoot.appendChild(_this.buildAnswerSnippetContent(innerHTML, style).el);\n        });\n        if (this.source) {\n            this.collapsibleContainer.append(this.buildSourceUrl(this.source.clickUri));\n            this.collapsibleContainer.append(this.buildSourceTitle(this.source.title, this.source.clickUri));\n        }\n        return this.collapsibleContainer;\n    };\n    SmartSnippetCollapsibleSuggestion.prototype.buildAnswerSnippetContent = function (innerHTML, style) {\n        var snippet = Dom_1.$$('div', { className: RAW_CONTENT_CLASSNAME }, innerHTML);\n        var container = Dom_1.$$('div', {}, snippet);\n        if (style) {\n            container.append(style);\n        }\n        return container;\n    };\n    SmartSnippetCollapsibleSuggestion.prototype.buildSourceTitle = function (title, clickUri) {\n        return this.buildLink(title, clickUri, SOURCE_TITLE_CLASSNAME);\n    };\n    SmartSnippetCollapsibleSuggestion.prototype.buildSourceUrl = function (url) {\n        return this.buildLink(url, url, SOURCE_URL_CLASSNAME);\n    };\n    SmartSnippetCollapsibleSuggestion.prototype.buildLink = function (text, href, className) {\n        var element = Dom_1.$$('a', { className: className, href: href }).el;\n        element.innerText = text;\n        return element;\n    };\n    SmartSnippetCollapsibleSuggestion.prototype.toggle = function () {\n        this.expanded = !this.expanded;\n        this.updateExpanded();\n    };\n    SmartSnippetCollapsibleSuggestion.prototype.updateExpanded = function () {\n        this.checkbox.setAttribute('aria-expanded', this.expanded.toString());\n        this.checkbox.setHtml(this.expanded ? SVGIcons_1.SVGIcons.icons.arrowUp : SVGIcons_1.SVGIcons.icons.arrowDown);\n        this.collapsibleContainer.setAttribute('tabindex', \"\" + (this.expanded ? 0 : -1));\n        this.collapsibleContainer.setAttribute('aria-hidden', (!this.expanded).toString());\n        this.collapsibleContainer.toggleClass(QUESTION_SNIPPET_HIDDEN_CLASSNAME, !this.expanded);\n    };\n    return SmartSnippetCollapsibleSuggestion;\n}());\nexports.SmartSnippetCollapsibleSuggestion = SmartSnippetCollapsibleSuggestion;\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// SmartSnippetSuggestions.min__45edc409d97327d59af1.js","import 'styling/_SmartSnippetSuggestions';\nimport { Component } from '../Base/Component';\nimport { exportGlobally } from '../../GlobalExports';\nimport { IComponentBindings } from '../Base/ComponentBindings';\nimport { QueryEvents, IQuerySuccessEventArgs } from '../../events/QueryEvents';\nimport { IPartialQuestionAnswerResponse, IQuestionAnswerResponse } from '../../rest/QuestionAnswerResponse';\nimport { $$, Dom } from '../../utils/Dom';\nimport { uniqueId, isEqual, find } from 'underscore';\nimport { SmartSnippetCollapsibleSuggestion } from './SmartSnippetCollapsibleSuggestion';\nimport { l } from '../../strings/Strings';\nimport { Initialization } from '../Base/Initialization';\n\nconst BASE_CLASSNAME = 'coveo-smart-snippet-suggestions';\nconst HAS_QUESTIONS_CLASSNAME = `${BASE_CLASSNAME}-has-questions`;\nconst QUESTIONS_LIST_CLASSNAME = `${BASE_CLASSNAME}-questions`;\nconst QUESTIONS_LIST_TITLE_CLASSNAME = `${QUESTIONS_LIST_CLASSNAME}-title`;\n\nexport const SmartSnippetSuggestionsClassNames = {\n  HAS_QUESTIONS_CLASSNAME,\n  QUESTIONS_LIST_CLASSNAME,\n  QUESTIONS_LIST_TITLE_CLASSNAME\n};\n\nexport class SmartSnippetSuggestions extends Component {\n  static ID = 'SmartSnippetSuggestions';\n\n  static doExport = () => {\n    exportGlobally({\n      SmartSnippetSuggestions\n    });\n  };\n\n  private readonly titleId = uniqueId(QUESTIONS_LIST_TITLE_CLASSNAME);\n  private contentLoaded: Promise<any>;\n  private title: Dom;\n  private questionAnswers: Dom;\n  private renderedQuestionAnswer: IQuestionAnswerResponse;\n\n  constructor(public element: HTMLElement, public options?: {}, bindings?: IComponentBindings) {\n    super(element, SmartSnippetSuggestions.ID, bindings);\n    this.bind.onRootElement(QueryEvents.deferredQuerySuccess, (data: IQuerySuccessEventArgs) => this.handleQuerySuccess(data));\n  }\n\n  public get loading() {\n    return this.contentLoaded;\n  }\n\n  /**\n   * @warning This method only works for the demo. In practice, the source of the answer will not always be part of the results.\n   */\n  private getCorrespondingResult(questionAnswer: IPartialQuestionAnswerResponse) {\n    return find(\n      this.queryController.getLastResults().results,\n      result => result.raw[questionAnswer.documentId.contentIdKey] === questionAnswer.documentId.contentIdValue\n    );\n  }\n\n  private handleQuerySuccess(data: IQuerySuccessEventArgs) {\n    const questionAnswer = data.results.questionAnswer;\n    const hasQuestions = !!(questionAnswer && questionAnswer.relatedQuestions.length);\n    $$(this.element).toggleClass(HAS_QUESTIONS_CLASSNAME, hasQuestions);\n    if (hasQuestions) {\n      if (this.renderedQuestionAnswer && isEqual(questionAnswer, this.renderedQuestionAnswer)) {\n        return;\n      }\n      this.detachContent();\n      this.element.appendChild((this.title = this.buildTitle()).el);\n      this.element.appendChild((this.questionAnswers = this.buildQuestionAnswers(questionAnswer.relatedQuestions)).el);\n    } else {\n      this.detachContent();\n    }\n    this.renderedQuestionAnswer = questionAnswer;\n  }\n\n  private detachContent() {\n    this.title && this.title.detach();\n    this.questionAnswers && this.questionAnswers.detach();\n    this.title = this.questionAnswers = null;\n  }\n\n  private buildTitle() {\n    return $$('span', { className: QUESTIONS_LIST_TITLE_CLASSNAME, id: this.titleId }, l('SuggestedQuestions'));\n  }\n\n  private buildQuestionAnswers(questionAnswers: IPartialQuestionAnswerResponse[]) {\n    const innerCSS = this.getInnerCSS();\n    const answers = questionAnswers.map(\n      questionAnswer => new SmartSnippetCollapsibleSuggestion(questionAnswer, innerCSS, this.getCorrespondingResult(questionAnswer))\n    );\n    const container = $$(\n      'ul',\n      { className: QUESTIONS_LIST_CLASSNAME, ariaLabelledby: this.titleId },\n      ...answers.map(answer => answer.build())\n    );\n    this.contentLoaded = Promise.all(answers.map(answer => answer.loading));\n    return container;\n  }\n\n  private getInnerCSS() {\n    return $$(this.element)\n      .children()\n      .filter(element => element instanceof HTMLScriptElement && element.type.toLowerCase() === 'text/css')\n      .map(element => element.innerHTML)\n      .join('\\n');\n  }\n}\n\nInitialization.registerAutoCreateComponent(SmartSnippetSuggestions);\nSmartSnippetSuggestions.doExport();\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/SmartSnippet/SmartSnippetSuggestions.ts","import { $$ } from '../utils/Dom';\nimport 'styling/_AttachShadowPolyfill';\n\nexport async function attachShadow(element: HTMLElement, init: ShadowRootInit & { title: string }): Promise<HTMLElement> {\n  const iframe = $$('iframe', { className: 'coveo-shadow-iframe', scrolling: 'no', title: init.title }).el as HTMLIFrameElement;\n  const onLoad = new Promise(resolve => iframe.addEventListener('load', () => resolve()));\n  element.appendChild(iframe);\n  await onLoad;\n\n  const iframeBody = iframe.contentDocument.body as HTMLBodyElement;\n  iframeBody.style.margin = '0';\n  const shadowRoot = $$('div', { style: 'overflow: auto;' }).el;\n  iframeBody.appendChild(shadowRoot);\n  autoUpdateHeight(iframe, shadowRoot);\n  if (init.mode === 'open') {\n    Object.defineProperty(element, 'shadowRoot', { get: () => shadowRoot });\n  }\n\n  return shadowRoot;\n}\n\nfunction autoUpdateHeight(elementToResize: HTMLElement, content: HTMLElement) {\n  const heightObserver = new MutationObserver(() => {\n    elementToResize.style.height = `${content.clientHeight}px`;\n  });\n  heightObserver.observe(content, {\n    attributes: true,\n    characterData: true,\n    childList: true,\n    subtree: true\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/misc/AttachShadowPolyfill.ts","import { IPartialQuestionAnswerResponse } from '../../rest/QuestionAnswerResponse';\nimport { uniqueId } from 'underscore';\nimport { AccessibleButton } from '../../utils/AccessibleButton';\nimport { SVGIcons } from '../../utils/SVGIcons';\nimport { attachShadow } from '../../misc/AttachShadowPolyfill';\nimport { $$, Dom } from '../../utils/Dom';\nimport { l } from '../../strings/Strings';\nimport { IQueryResult } from '../../rest/QueryResult';\n\nconst QUESTION_CLASSNAME = `coveo-smart-snippet-suggestions-question`;\nconst QUESTION_TITLE_CLASSNAME = `${QUESTION_CLASSNAME}-title`;\nconst QUESTION_TITLE_LABEL_CLASSNAME = `${QUESTION_TITLE_CLASSNAME}-label`;\nconst QUESTION_TITLE_CHECKBOX_CLASSNAME = `${QUESTION_TITLE_CLASSNAME}-checkbox`;\nconst QUESTION_SNIPPET_CLASSNAME = `${QUESTION_CLASSNAME}-snippet`;\nconst QUESTION_SNIPPET_HIDDEN_CLASSNAME = `${QUESTION_SNIPPET_CLASSNAME}-hidden`;\nconst SHADOW_CLASSNAME = `${QUESTION_SNIPPET_CLASSNAME}-content`;\nconst RAW_CONTENT_CLASSNAME = `${SHADOW_CLASSNAME}-raw`;\nconst SOURCE_CLASSNAME = `${QUESTION_CLASSNAME}-source`;\nconst SOURCE_TITLE_CLASSNAME = `${SOURCE_CLASSNAME}-title`;\nconst SOURCE_URL_CLASSNAME = `${SOURCE_CLASSNAME}-url`;\n\nexport const SmartSnippetCollapsibleSuggestionClassNames = {\n  QUESTION_CLASSNAME,\n  QUESTION_TITLE_CLASSNAME,\n  QUESTION_TITLE_LABEL_CLASSNAME,\n  QUESTION_TITLE_CHECKBOX_CLASSNAME,\n  QUESTION_SNIPPET_CLASSNAME,\n  QUESTION_SNIPPET_HIDDEN_CLASSNAME,\n  SHADOW_CLASSNAME,\n  RAW_CONTENT_CLASSNAME,\n  SOURCE_CLASSNAME,\n  SOURCE_TITLE_CLASSNAME,\n  SOURCE_URL_CLASSNAME\n};\n\nexport class SmartSnippetCollapsibleSuggestion {\n  private readonly labelId = uniqueId(QUESTION_TITLE_LABEL_CLASSNAME);\n  private readonly snippetId = uniqueId(QUESTION_SNIPPET_CLASSNAME);\n  private readonly checkboxId = uniqueId(QUESTION_TITLE_CHECKBOX_CLASSNAME);\n  private contentLoaded: Promise<void>;\n  private collapsibleContainer: Dom;\n  private checkbox: Dom;\n  private expanded = false;\n\n  constructor(\n    private readonly questionAnswer: IPartialQuestionAnswerResponse,\n    private readonly innerCSS?: string,\n    private readonly source?: IQueryResult\n  ) {}\n\n  public get loading() {\n    return this.contentLoaded;\n  }\n\n  public build() {\n    const collapsibleContainer = this.buildCollapsibleContainer(\n      this.questionAnswer.answerSnippet,\n      this.questionAnswer.question,\n      this.innerCSS && this.buildStyle(this.innerCSS)\n    );\n    const title = this.buildTitle(this.questionAnswer.question);\n    this.updateExpanded();\n    return $$(\n      'li',\n      {\n        className: QUESTION_CLASSNAME,\n        ariaLabelledby: this.labelId\n      },\n      title,\n      collapsibleContainer\n    ).el as HTMLLIElement;\n  }\n\n  private buildStyle(innerCSS: string) {\n    const styleTag = document.createElement('style');\n    styleTag.innerHTML = innerCSS;\n    return styleTag;\n  }\n\n  private buildTitle(question: string) {\n    const checkbox = this.buildCheckbox(question);\n    const label = $$('span', { className: QUESTION_TITLE_LABEL_CLASSNAME, id: this.labelId });\n    label.text(question);\n    const title = $$('span', { className: QUESTION_TITLE_CLASSNAME }, label, checkbox);\n    title.on('click', () => this.toggle());\n    return title;\n  }\n\n  private buildCheckbox(question: string) {\n    this.checkbox = $$('div', {\n      role: 'button',\n      tabindex: 0,\n      ariaControls: this.snippetId,\n      className: QUESTION_TITLE_CHECKBOX_CLASSNAME,\n      id: this.checkboxId\n    });\n    new AccessibleButton()\n      .withElement(this.checkbox)\n      .withLabel(l('ExpandQuestionAnswer', question))\n      .withEnterKeyboardAction(() => this.toggle())\n      .build();\n    return this.checkbox;\n  }\n\n  private buildCollapsibleContainer(innerHTML: string, title: string, style?: HTMLStyleElement) {\n    const shadowContainer = $$('div', { className: SHADOW_CLASSNAME });\n    this.collapsibleContainer = $$('div', { className: QUESTION_SNIPPET_CLASSNAME, id: this.snippetId }, shadowContainer);\n    this.contentLoaded = attachShadow(shadowContainer.el, { mode: 'open', title: l('AnswerSpecificSnippet', title) }).then(shadowRoot => {\n      shadowRoot.appendChild(this.buildAnswerSnippetContent(innerHTML, style).el);\n    });\n    if (this.source) {\n      this.collapsibleContainer.append(this.buildSourceUrl(this.source.clickUri));\n      this.collapsibleContainer.append(this.buildSourceTitle(this.source.title, this.source.clickUri));\n    }\n    return this.collapsibleContainer;\n  }\n\n  private buildAnswerSnippetContent(innerHTML: string, style?: HTMLStyleElement) {\n    const snippet = $$('div', { className: RAW_CONTENT_CLASSNAME }, innerHTML);\n    const container = $$('div', {}, snippet);\n    if (style) {\n      container.append(style);\n    }\n    return container;\n  }\n\n  private buildSourceTitle(title: string, clickUri: string) {\n    return this.buildLink(title, clickUri, SOURCE_TITLE_CLASSNAME);\n  }\n\n  private buildSourceUrl(url: string) {\n    return this.buildLink(url, url, SOURCE_URL_CLASSNAME);\n  }\n\n  private buildLink(text: string, href: string, className: string) {\n    const element = $$('a', { className, href }).el as HTMLAnchorElement;\n    element.innerText = text;\n    return element;\n  }\n\n  private toggle() {\n    this.expanded = !this.expanded;\n    this.updateExpanded();\n  }\n\n  private updateExpanded() {\n    this.checkbox.setAttribute('aria-expanded', this.expanded.toString());\n    this.checkbox.setHtml(this.expanded ? SVGIcons.icons.arrowUp : SVGIcons.icons.arrowDown);\n    this.collapsibleContainer.setAttribute('tabindex', `${this.expanded ? 0 : -1}`);\n    this.collapsibleContainer.setAttribute('aria-hidden', (!this.expanded).toString());\n    this.collapsibleContainer.toggleClass(QUESTION_SNIPPET_HIDDEN_CLASSNAME, !this.expanded);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/SmartSnippet/SmartSnippetCollapsibleSuggestion.ts"],"sourceRoot":""}